/* ===== Sidebar ===== */
.wrap{
  /* -------------------------------------------
     ✅ Sidebar 토큰 (기본: Light)
     - 전역 변수 있으면 그대로 쓰고,
       없으면 여기 fallback 값으로 동작
  ------------------------------------------- */
  --sidebar-bg: transparent;

  --text-dark: #111827;
  --text-neutral: rgba(17, 24, 39, 0.72);

  --border-soft: rgba(15, 23, 42, 0.12);

  --accent: #2563eb;

  --btn-blue: #2388ff;
  --btn-blue-2: #1470ff;

  --item-hover-bg: #EFF4FF;
  --item-active-bg: #EFF4FF;
  --item-active-text: #1F2A37;

  --scroll-thumb: rgba(0,0,0,.12);

  --start-bg: #eef3ff;
  --start-bg-hover: #2388ff;
  --start-fg: #2388ff;
  --start-fg-hover: #eef3ff;

  width:296px; min-width:296px;
  height:100%;
  min-height:0;                 /* ✅ 중요: flex 스크롤을 위해 */
  padding:24px 12px 16px;

  display:flex; flex-direction:column;
  gap:16px;

  border-right: none;
  box-shadow: none;
  overflow:hidden;              /* ✅ sidebar 자체는 고정, 내부(listArea)만 스크롤 */
  transition:width .2s ease, padding .2s ease, background .2s;

  /* ✅ 다크/라이트 모두에서 배경 토큰 적용 가능하게 */
  background: var(--sidebar-bg, transparent);
}

/* ======================================================
   ✅ 사용자 테마(수동) : data-theme="dark" 우선 적용
   ====================================================== */
body[data-theme='dark'] .wrap{
  --sidebar-bg: #0b1220;

  --text-dark: rgba(229,231,235,0.94);
  --text-neutral: rgba(229,231,235,0.74);

  --border-soft: rgba(148, 163, 184, 0.18);

  --accent: #60a5fa;

  --btn-blue: #3b82f6;
  --btn-blue-2: #2563eb;

  --item-hover-bg: rgba(96,165,250,0.14);
  --item-active-bg: rgba(96,165,250,0.16);
  --item-active-text: rgba(229,231,235,0.94);

  --scroll-thumb: rgba(255,255,255,.18);

  --start-bg: rgba(96,165,250,0.14);
  --start-bg-hover: #3b82f6;
  --start-fg: rgba(229,231,235,0.92);
  --start-fg-hover: #0b1220;
}

/* ======================================================
   ✅ OS 다크모드 fallback
   - data-theme가 없을 때만 적용 (덮어쓰기 방지)
   ====================================================== */
@media (prefers-color-scheme: dark) {
  body:not([data-theme]) .wrap{
    --sidebar-bg: #0b1220;

    --text-dark: rgba(229,231,235,0.94);
    --text-neutral: rgba(229,231,235,0.74);

    --border-soft: rgba(148, 163, 184, 0.18);

    --accent: #60a5fa;

    --btn-blue: #3b82f6;
    --btn-blue-2: #2563eb;

    --item-hover-bg: rgba(96,165,250,0.14);
    --item-active-bg: rgba(96,165,250,0.16);
    --item-active-text: rgba(229,231,235,0.94);

    --scroll-thumb: rgba(255,255,255,.18);

    --start-bg: rgba(96,165,250,0.14);
    --start-bg-hover: #3b82f6;
    --start-fg: rgba(229,231,235,0.92);
    --start-fg-hover: #0b1220;
  }
}

.collapsed{
  width:64px; min-width:64px;
  padding:16px 8px;
  background: var(--sidebar-bg, transparent);
  border-right: none;
  min-height:0;
  overflow:hidden;
}

.header{
  cursor: pointer;
  display:flex;
  flex-direction:column;
  gap:12px;
  flex:0 0 auto;                /* ✅ 헤더는 줄어들지 않게 */
}

.titleRow{
  height:40px;
  padding:0 6px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.brand{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
  height:25px;
}

.fav{ height:25px; }

.brandText{
  color:var(--text-dark);
  font-size:12px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ✅ 파란 배경 + 흰 화살표 */
.collapseBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:28px; height:28px;
  border-radius:8px;
  background:linear-gradient(to bottom,var(--btn-blue),var(--btn-blue-2));
  border:1px solid rgba(6,121,255,0.9);
  box-shadow:0 2px 5px rgba(20,88,201,.17);
  line-height:0;
}
.collapseBtn:hover{ filter:brightness(.95); }

/* 아이콘이 0px로 수축되는 문제 방지 + 흰색 고정 */
.collapseBtn :global(svg){
  width:16px !important;
  height:16px !important;
  min-width:16px;
  min-height:16px;
  flex:0 0 16px;
  display:block;
  stroke:#fff !important;
  color:#fff !important;
}

.iconWhite{ width:16px; height:16px; color:#fff; }

.nav{
  display:flex;
  flex-direction:column;
  gap:8px;
}

.navItem{
  cursor:pointer;
  height:36px;
  flex:0 0 36px;                /* ✅ 줄어들지 않게 */
  padding:0 8px;
  display:flex;
  align-items:center;
  border-radius:8px;
}
.navItem:hover{
  background: var(--item-hover-bg);
}

.navLeft{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}

.iconSm{ width:16px; height:16px; color:var(--text-neutral); }

/* ✅ 텍스트는 항상 1줄 */
.navText{
  font-size:12px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  color: var(--text-dark);
}

/* ✅ 구분선 */
.divider{
  width:100%;
  height:1px;
  background: var(--border-soft);
  flex:0 0 auto;
}

/* ✅ 핵심: 리스트 영역만 스크롤 */
.listArea{
  flex:1 1 auto;
  min-height:0;                 /* ✅ 중요: overflow 작동 */
  overflow-y:auto;
  overflow-x:hidden;
  display:flex;
  flex-direction:column;
  gap:2px;
  scrollbar-gutter: stable;     /* ✅ 스크롤 생겨도 레이아웃 흔들림 최소화 */
  padding-right:2px;            /* ✅ 스크롤바 공간 살짝 */
}

/* 선택: 스크롤바 얇게 */
.listArea::-webkit-scrollbar{ width:8px; }
.listArea::-webkit-scrollbar-thumb{
  background: var(--scroll-thumb);
  border-radius: 10px;
}
.listArea::-webkit-scrollbar-track{ background: transparent; }

.chatItem{
  height:38px;
  flex:0 0 38px;                /* ✅ 많아져도 높이(간격) 안 줄어듦 */
  padding:0 8px;
  display:flex;
  align-items:center;
  border-radius:8px;
  cursor:pointer;
}

.chatItem:hover {
  background: var(--item-hover-bg);
}

.chatItem:hover span,
.chatItem:hover p,
.chatItem:hover .title,
.chatItem:hover .desc {
  color: var(--item-active-text);
}

.chatActive{
  background: var(--item-active-bg);
}
.chatActive span,
.chatActive p,
.chatActive .title,
.chatActive .desc {
  color: var(--item-active-text);
}

.iconSmAccent{ width:16px; height:16px; color:var(--accent); }
.iconSmMuted{ width:16px; height:16px; color:var(--text-neutral); }

.chatText{
  gap:8px;
  margin-left: 1vw;
  font-size:13px;
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  color: var(--text-dark);
}

.iconXsMuted{ width:12px; height:12px; color:var(--text-dark); }

.deleteBtn{ padding:6px; border-radius:6px; }
.deleteBtn:hover{ background: rgba(148,163,184,0.14); }

/* ✅ footer는 항상 아래 고정 */
.footer{
  margin-top:auto;
  flex:0 0 auto;
}

.startBtn{
  background: var(--start-bg) !important;
  background-color: var(--start-bg) !important;
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  transition: background-color .15s ease, color .15s ease;
}

.startBtn:hover{
  background: var(--start-bg-hover) !important;
  background-color: var(--start-bg-hover) !important;
}

.plus{ width:15px; height:15px; color: var(--start-fg); }
.startLabel{ color: var(--start-fg); white-space:nowrap; }

.startBtn:hover .plus{ color: var(--start-fg-hover) !important; }
.startBtn:hover .startLabel{ color: var(--start-fg-hover) !important; }

/* ✅ 접힘 상태: 텍스트 숨기고, 아이콘만 */
.collapsed .brandText,
.collapsed .navText,
.collapsed .chatText,
.collapsed .startLabel{ display:none; }

.collapsed .nav{ align-items:center; gap:12px; }
.collapsed .navItem{ justify-content:center; padding:0; }
.collapsed .listArea{ padding-left:0; }

/* ======================================================
   ✅ 모바일(overlay)에서는 "접기/최소화" 기능 비활성화
   ====================================================== */
.mobileCloseBtn{
  display:none;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.12);
}

.mobileCloseIcon{
  width:18px;
  height:18px;
  color:#fff;
}

@media (max-width: 768px){
  /* ✅ 모바일 overlay에서 사이드바 폭을 GPT처럼 */
  .wrap{
    width: min(86vw, 340px);
    min-width: min(86vw, 340px);
    padding:20px 12px 16px;
  }

  /* ✅ 혹시 데스크톱에서 collapsed가 켜져있어도 모바일에서는 무시 */
  .collapsed{
    width: min(86vw, 340px);
    min-width: min(86vw, 340px);
    padding:20px 12px 16px;
  }

  /* ✅ 화살표 버튼(접기) 숨김 */
  .collapseBtn{ display:none; }

  /* ✅ collapsed가 붙어도 텍스트는 다시 보이게 복원 */
  .collapsed .brandText,
  .collapsed .navText,
  .collapsed .chatText,
  .collapsed .startLabel{
    display:inline;
  }

  /* ✅ 레이아웃도 원상복구 */
  .collapsed .nav{ align-items:stretch; gap:8px; }
  .collapsed .navItem{ justify-content:flex-start; padding:0 8px; }
  .collapsed .listArea{ padding-left:0; }

  /* ✅ 모바일 닫기 버튼 */
  .mobileCloseBtn{ display:inline-flex; }
}
