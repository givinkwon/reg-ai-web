:root {
  --text-dark:#303650; --text-neutral:#666F8D; --accent:#2388FF;
  --border-light:#EAEDF5; --border-med:#D8DEEA;
}

/* ───── 컨테이너 ───── */
.wrap{
  display:flex; flex-direction:column;
  width:100%;
  height:100%;
  min-height:0;
  background:#fff;
  border:1px solid var(--border-light);
  border-radius:16px;
  box-shadow:0 1px 3px rgba(25,33,61,.1);
}

/* header */
.header{
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 24px;
  border-bottom:1px solid var(--border-med);
  border-top-left-radius:16px; border-top-right-radius:16px;
}
.left{ display:flex; align-items:center; gap:14px; }
.menuBtn{ padding:8px; border-radius:8px; }
.menuBtn:hover{ background:#f5f7fb; }
.brand{ color:var(--text-dark); font-size:16px; font-weight:600; }
.iconMd{ width:20px; height:20px; color:var(--text-dark); }
.iconSm{ width:16px; height:16px; color:var(--text-dark); }
.iconXs{ width:12px; height:12px; }

.right{ display:flex; align-items:center; gap:16px; }
.settingsBtn{ display:none; }
@media (min-width:768px){
  .settingsBtn{ display:flex; gap:6px; padding:6px 12px; font-size:12px; background:#EAEDF5; border:1px solid var(--border-light); color:var(--text-dark); border-radius:8px; }
}
.account{ display:flex; align-items:center; gap:8px; }
.avatar{ width:32px; height:32px; border-radius:50%; background:#EAF2FF; display:flex; align-items:center; justify-content:center; box-shadow:0 -2px 4px rgba(35,136,255,.08) inset; }
.nameRow{ display:flex; align-items:center; gap:2px; }
.name{ color:var(--text-dark); font-size:14px; font-weight:500; }
.vertDivider{ width:1.5px; height:32px; background:#EAEDF5; display:none; }
.meta{ display:none; }
@media (min-width:1024px){ .vertDivider{ display:block; } .meta{ display:flex; align-items:center; gap:8px; } }
.metaStrong{ color:#303650; font-size:14px; letter-spacing:.84px; text-transform:uppercase; }
.metaWeak{ color:var(--text-neutral); font-size:12px; }

/* ───── 본문 ───── */
.body{
  flex:1 1 auto;
  display:flex; flex-direction:column;
  min-height:0;
  padding:24px 64px;
}
.stream{
  flex:1 1 auto;
  min-height:0;
  overflow-y:auto;
  overscroll-behavior:contain;
  display:flex; flex-direction:column; gap:16px;
  max-width:680px;
  width:100%; margin:0 auto;
}

.welcome{
  border:1px solid var(--border-light); border-radius:16px; padding:24px;
  box-shadow:0 2px 4px rgba(25,33,61,.08);
  color:var(--text-dark); background:#fff;
}

/* 메시지 카드 */
.userMsg{ width:100%; text-align:right; color:var(--text-dark); font-size:14px; }
.aiMsg{
  display:flex; flex-direction:column;
  gap:10px;
  border:1px solid var(--border-light); border-radius:16px; padding:16px;
  box-shadow:0 2px 4px rgba(25,33,61,.08);
  background:#fff;
}
.aiAvatar{ width:24px; height:24px; border-radius:50%; background:#EAF2FF; flex-shrink:0; display:none; }

/* 본문 텍스트 */
.msgContent{
  font-size:14px; color:var(--text-dark); line-height:1.55;
  white-space:pre-wrap;
  word-break:break-word;
  overflow-wrap:anywhere;
}

/* ───── 하단 액션 바 ───── */
.actionRow{
  display:flex; align-items:center; gap:10px;
  justify-content:flex-end;      /* 우측 정렬 */
  margin-top:6px;
}

/* 아이콘 묶음(왼쪽) */
.iconGroup{ display:flex; align-items:center; gap:8px; }

/* 전역 리셋 영향 방지용 */
.btnReset{
  all: unset;
  box-sizing: border-box;
  cursor: pointer;
}

/* 동그란 아이콘 버튼 */
.iconBtn{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:8px;
  background:#F3F5FA; border:1px solid #E6EAF2;
  line-height:0;                     /* 수직 정렬 깨짐 방지 */
}
.iconBtn:hover{ background:#eef2f9; }

/* 실제 SVG 크기 고정 */
.iconSvg{
  width:16px; height:16px; color:#8b95b2;
  flex:0 0 auto; pointer-events:none;
}

/* ‘근거/서식’ 버튼(오른쪽) */
.evidenceBtn{
  height:28px; padding:0 10px; border-radius:999px;
  background:#eaf2ff; border:1px solid #d7e6ff;
  font-size:12px; color:#1f5ed6; line-height:0;
}
.evidenceBtn:hover{ filter:brightness(.97); }

/* 로딩 카드 */
.loadingCard{ display:flex; align-items:center; gap:8px; border:1px solid var(--border-light); border-radius:16px; padding:16px; background:#fff; color:var(--text-dark); }
.dots{ margin-left:8px; display:inline-flex; gap:3px; }
.dots span{ animation:pulse 1.2s infinite ease-in-out; }
.dots span:nth-child(2){ animation-delay:.15s; }
.dots span:nth-child(3){ animation-delay:.3s; }
@keyframes pulse{ 0%,80%,100%{ opacity:.2 } 40%{ opacity:1 } }

/* 입력 영역 */
.inputRow{
  flex:0 0 auto;
  display:flex; gap:12px;
  max-width:680px; width:100%; margin:12px auto 0;
  padding-bottom:8px;
}
/* 입력창 래퍼(칩 배치용) */
.inputWrap{ position:relative; flex:1; }

.input{
  flex:1 1 auto; min-width:0;
  border:1px solid var(--border-light); border-radius:12px;
  padding:10px 12px; outline:none; font-size:14px; color:var(--text-dark);
}
.input::placeholder{ color:var(--text-neutral); }
.sendBtn{ padding:8px; border-radius:10px; background:#EEF3FF; }
.iconMdAccent{ width:20px; height:20px; color:var(--accent); }

/* 토스트 */
.toast{
  position: fixed;
  left: 50%;
  bottom: 76px;
  transform: translateX(-50%);
  background: rgba(33, 41, 66, .92);
  color:#fff;
  font-size:13px;
  padding:8px 12px;
  border-radius:10px;
  box-shadow:0 6px 20px rgba(0,0,0,.18);
  z-index: 50;
}

/* (참고) 아이콘 색이 흐릿하면 유지 */
.iconAction{ width:16px; height:16px; color:#8b95b2; stroke:#8b95b2; flex-shrink:0; }

/* ===================================================================== */
/* ↓↓↓ 추가: 입력창 안 ‘분야’ 칩 + 칩 공간 확보 + 모달 + 다크모드 보정 ↓↓↓ */
/* ===================================================================== */

/* 입력창 왼쪽 칩(분야 표시) */
.typeChip{
  position:absolute; left:8px; top:50%; transform:translateY(-50%);
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid #c7ddff;
  background:#e0ecff;
  color:#0b3b8c;
  font-size:13px; font-weight:600;
  line-height:1;
}
.typeEmoji{ font-size:16px; line-height:1; }
.typeText{}

/* 칩만큼 입력창 왼쪽 패딩 확보 */
.inputHasChip{ padding-left: 110px; }

/* 타입 선택 모달 오버레이 */
.typeModalOverlay{
  position:fixed; inset:0;
  background: rgba(12,18,36,.45);
  backdrop-filter: blur(2px);
  display:flex; align-items:center; justify-content:center;
  z-index:110;
}

/* 타입 선택 모달 */
.typeModal{
  width:min(560px, 92vw);
  border-radius:16px;
  padding:18px 16px 20px;
  background:#ffffff;
  color:#111827;
  border:1px solid #e5e7eb;
  box-shadow:0 12px 40px rgba(0,0,0,.35);
}
.typeTitle{
  font-weight:700; font-size:18px;
  margin:4px 6px 14px;
}
.typeGrid{
  display:grid; grid-template-columns:1fr 1fr;
  gap:12px;
}
.typeCard{
  display:flex; align-items:center; justify-content:center;
  gap:10px;
  padding:14px 12px;
  border-radius:14px;
  border:1px solid #e5e7eb;
  background:#ffffff;
  color:#0f172a;
  box-shadow:0 2px 8px rgba(17,24,39,.06);
  transition: transform .06s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
}
.typeCard:hover{
  transform: translateY(-1px);
  box-shadow:0 6px 16px rgba(17,24,39,.12);
  border-color:#cbd5e1;
  background:#f8fafc;
}
.typeLabel{ font-weight:600; }
.typeEmoji{ font-size:22px; }

/* 다크모드 대비 보정 */
@media (prefers-color-scheme: dark) {
  .typeModalOverlay{ background: rgba(4,6,12,.58); }
  .typeModal{
    background:#0f172a;           /* slate-900 */
    color:#e5e7eb;                /* slate-200 */
    border:1px solid #1f2937;     /* slate-800 */
    box-shadow:0 14px 48px rgba(0,0,0,.6);
  }
  .typeCard{
    background:#111827;           /* slate-900+ */
    color:#f3f4f6;                /* slate-100 */
    border:1px solid #334155;     /* slate-700 */
    box-shadow:0 2px 8px rgba(0,0,0,.35);
  }
  .typeCard:hover{
    background:#0b1220;
    border-color:#475569;
    box-shadow:0 8px 22px rgba(0,0,0,.55);
  }
  .typeChip{
    background:#1e3a8a;           /* blue-800 */
    color:#e0e7ff;
    border:1px solid #1d4ed8;
  }
}

/* 수동 다크(삼성 인터넷 강제 다크 대응) */
:global(html[data-theme="dark"]) .typeModalOverlay{ background: rgba(4,6,12,.58); }
:global(html[data-theme="dark"]) .typeModal{
  background:#0f172a; color:#e5e7eb; border:1px solid #1f2937; box-shadow:0 14px 48px rgba(0,0,0,.6);
}
:global(html[data-theme="dark"]) .typeCard{
  background:#111827; color:#f3f4f6; border:1px solid #334155; box-shadow:0 2px 8px rgba(0,0,0,.35);
}
:global(html[data-theme="dark"]) .typeCard:hover{
  background:#0b1220; border-color:#475569; box-shadow:0 8px 22px rgba(0,0,0,.55);
}
:global(html[data-theme="dark"]) .typeChip{
  background:#1e3a8a; color:#e0e7ff; border:1px solid #1d4ed8;
}
