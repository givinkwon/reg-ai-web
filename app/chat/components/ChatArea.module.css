/* =========================================================
   ChatArea.module.css
   - Web/Desktop first
   - Mobile overrides at bottom
   ========================================================= */

/* =========================================================
   1) Theme tokens + wrap
   ========================================================= */
.wrap {
  /* Light tokens */
  --bg: #f9fafb;
  --surface: #ffffff;
  --surface-2: #f3f4f6;
  --input-bg: #f9fafb;

  --border: #e5e7eb;
  --border-2: rgba(15, 23, 42, 0.14);

  --text: #111827;
  --text-2: rgba(17, 24, 39, 0.82);
  --muted: rgba(17, 24, 39, 0.55);
  --muted-2: rgba(17, 24, 39, 0.45);

  --accent: #2563eb;
  --accent-2: #1d4ed8;
  --accent-soft: rgba(37, 99, 235, 0.12);

  --btn-bg: #e5edff;
  --btn-hover: #dbeafe;

  --chip-bg: #eef2ff;
  --chip-text: #2563eb;
  --chip-icon: #2563eb;

  --bubble-user-bg: #2563eb;
  --bubble-user-text: #f9fafb;
  --bubble-ai-bg: #f3f4f6;
  --bubble-ai-text: #111827;

  --shadow-1: 0 1px 3px rgba(15, 23, 42, 0.08);
  --shadow-2: 0 18px 40px rgba(148, 163, 184, 0.35);

  /* quick buttons */
  --quick-bg: #e5f1ff;
  --quick-border: #bfdbfe;
  --quick-text: #0f172a;
  --quick-shadow: 0 18px 40px rgba(148, 163, 184, 0.4);

  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow-1);
  box-sizing: border-box;
  overflow: hidden;
}

/* =========================================================
   2) Dark mode overrides
   - data-theme="dark" 우선
   - OS dark fallback은 theme 미지정일 때만
   ========================================================= */
body[data-theme='dark'] .wrap {
  --bg: #060b16;
  --surface: #0b1220;
  --surface-2: #0f172a;
  --input-bg: #0b1220;

  --border: rgba(148, 163, 184, 0.18);
  --border-2: rgba(148, 163, 184, 0.26);

  --text: #e5e7eb;
  --text-2: rgba(229, 231, 235, 0.88);
  --muted: rgba(229, 231, 235, 0.66);
  --muted-2: rgba(229, 231, 235, 0.52);

  --accent: #60a5fa;
  --accent-2: #3b82f6;
  --accent-soft: rgba(96, 165, 250, 0.14);

  --btn-bg: rgba(148, 163, 184, 0.14);
  --btn-hover: rgba(148, 163, 184, 0.22);

  --chip-bg: rgba(148, 163, 184, 0.14);
  --chip-text: #e5e7eb;
  --chip-icon: #60a5fa;

  --bubble-user-bg: #3b82f6;
  --bubble-user-text: #0b1220;
  --bubble-ai-bg: #0f172a;
  --bubble-ai-text: #e5e7eb;

  --shadow-1: 0 18px 50px rgba(0, 0, 0, 0.45);
  --shadow-2: 0 18px 50px rgba(0, 0, 0, 0.45);

  --quick-bg: rgba(15, 23, 42, 0.92);
  --quick-border: rgba(96, 165, 250, 0.35);
  --quick-text: #e5e7eb;
  --quick-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
}

/* OS dark fallback (data-theme가 없을 때만) */
@media (prefers-color-scheme: dark) {
  body:not([data-theme]) .wrap {
    --bg: #060b16;
    --surface: #0b1220;
    --surface-2: #0f172a;
    --input-bg: #0b1220;

    --border: rgba(148, 163, 184, 0.18);
    --border-2: rgba(148, 163, 184, 0.26);

    --text: #e5e7eb;
    --text-2: rgba(229, 231, 235, 0.88);
    --muted: rgba(229, 231, 235, 0.66);
    --muted-2: rgba(229, 231, 235, 0.52);

    --accent: #60a5fa;
    --accent-2: #3b82f6;
    --accent-soft: rgba(96, 165, 250, 0.14);

    --btn-bg: rgba(148, 163, 184, 0.14);
    --btn-hover: rgba(148, 163, 184, 0.22);

    --chip-bg: rgba(148, 163, 184, 0.14);
    --chip-text: #e5e7eb;
    --chip-icon: #60a5fa;

    --bubble-user-bg: #3b82f6;
    --bubble-user-text: #0b1220;
    --bubble-ai-bg: #0f172a;
    --bubble-ai-text: #e5e7eb;

    --shadow-1: 0 18px 50px rgba(0, 0, 0, 0.45);
    --shadow-2: 0 18px 50px rgba(0, 0, 0, 0.45);

    --quick-bg: rgba(15, 23, 42, 0.92);
    --quick-border: rgba(96, 165, 250, 0.35);
    --quick-text: #e5e7eb;
    --quick-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
  }
}

/* =========================================================
   3) Header
   ========================================================= */
.header {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}

.headerLeft {
  display: flex;
  align-items: center;
  min-width: 0;
}

.headerRight {
  display: flex;
  align-items: center;
  gap: 8px;
}

.settingsBtn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  padding-inline: 10px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
}

.accountLabel {
  margin-left: 6px;
  font-size: 12px;
  max-width: 140px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text);
}

.iconXs {
  width: 14px;
  height: 14px;
  color: var(--muted);
}

/* ✅ TSX에서 쓰는데 없던 클래스들 */
.menuBtn {
  display: none;
  border: none;
  background: transparent;
  cursor: pointer;
  border-radius: 10px;
  padding: 6px;
}
.menuBtn:hover {
  background: var(--surface-2);
}
.menuIcon {
  width: 18px;
  height: 18px;
  color: var(--muted);
}

/* =========================================================
   4) Body / stream
   ========================================================= */
.body {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  min-height: 0;
  background: var(--surface);
}

.stream {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px;
}

.streamInner {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bottomSpacer {
  height: 8px;
}

/* =========================================================
   5) Messages (user / ai)
   ========================================================= */
.userRow {
  display: flex;
  justify-content: flex-end;
}

.userBubble {
  max-width: min(640px, 100%);
  padding: 10px 12px;
  border-radius: 16px 16px 4px 16px;
  background: var(--bubble-user-bg);
  color: var(--bubble-user-text);
  font-size: 14px;
  line-height: 1.5;
  word-break: break-word;
}

.userContent p {
  margin: 0;
}

.aiRow {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;
}

.aiBubble {
  max-width: min(720px, 100%);
  padding: 10px 12px;
  border-radius: 16px 16px 16px 4px;
  background: var(--bubble-ai-bg);
  color: var(--bubble-ai-text);
  font-size: 14px;
  line-height: 1.75;
  word-break: keep-all;
  overflow-wrap: anywhere;
  border: 1px solid var(--border);
}

/* AI bubble typographic */
.aiBubble h3[data-ai='title'] {
  margin: 0 0 10px;
  font-size: 16px;
  font-weight: 900;
}

.aiBubble h4[data-ai='heading'] {
  margin: 10px 0 8px;
  font-size: 15px;
  font-weight: 800;
}

.aiBubble p[data-ai='subheading'] {
  margin: 10px 0 6px;
}
.aiBubble p[data-ai='subheading'] strong {
  font-weight: 900;
}

.aiBubble p {
  margin: 0 0 8px;
}
.aiBubble p:last-child {
  margin-bottom: 0;
}

/* dot style (formatAssistantHtml에서 쓰는 data-ai-dot 계열) */
.aiBubble p[data-ai-dot='1'] {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}
.aiBubble span[data-ai='dotmark'] {
  flex: 0 0 auto;
  font-weight: 900;
  opacity: 0.75;
  line-height: 1.6;
}
.aiBubble span[data-ai='dottext'] {
  flex: 1 1 auto;
  min-width: 0;
}

/* list marker forcing */
.aiBubble ul {
  margin: 6px 0 10px;
  padding-left: 0;
  list-style: none;
}
.aiBubble ul > li {
  position: relative;
  padding-left: 16px;
  margin: 4px 0;
}
.aiBubble ul > li::before {
  content: ' • ';
  position: absolute;
  left: 0;
  font-weight: 900;
  opacity: 0.75;
}

/* =========================================================
   6) Message actions
   ========================================================= */
.actionRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding-left: 4px;
}

.miniActions {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.iconBtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  cursor: pointer;
}

.iconBtn:hover {
  background: var(--surface-2);
}

.iconAction {
  color: var(--muted);
}

.evidenceBtn {
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(37, 99, 235, 0.18);
  background: var(--accent-soft);
  color: var(--accent);
  font-size: 12px;
  cursor: pointer;
  white-space: nowrap;
  font-weight: 700;
}
.evidenceBtn:hover {
  background: rgba(37, 99, 235, 0.18);
  border-color: rgba(37, 99, 235, 0.28);
}

/* =========================================================
   7) Loading bubble
   ========================================================= */
.loadingCard {
  align-self: flex-start;
  padding: 10px 12px;
  border-radius: 16px;
  background: var(--bubble-ai-bg);
  font-size: 14px;
  color: var(--muted);
  display: inline-flex;
  align-items: center;
  gap: 4px;
  border: 1px solid var(--border);
}

.dots {
  display: inline-flex;
  gap: 2px;
  margin-left: 4px;
}

.dots span {
  animation: blink 1.3s infinite ease-in-out;
  font-size: 16px;
}

.dots span:nth-child(2) {
  animation-delay: 0.2s;
}
.dots span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes blink {
  0%,
  80%,
  100% {
    opacity: 0.2;
  }
  40% {
    opacity: 1;
  }
}

/* =========================================================
   8) Input row
   ========================================================= */
.inputRow {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  box-sizing: border-box;
  padding: 10px 16px 14px;
  background: var(--surface);
  border-top: 1px solid var(--border);
  position: sticky;
  bottom: 0;
  z-index: 10;
}

.inputWrap {
  flex: 1 1 auto;
  display: flex;
  align-items: center;
  box-sizing: border-box;
}

.inputShell {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--input-bg);
}

.plusBtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: none;
  background: var(--accent);
  color: #ffffff;
  cursor: pointer;
  flex-shrink: 0;
}
.plusBtn:hover {
  background: var(--accent-2);
}
.plusIcon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.taskChip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--chip-bg);
  color: var(--chip-text);
  font-size: 12px;
  white-space: nowrap;
  flex-shrink: 0;
  border: 1px solid rgba(37, 99, 235, 0.18);
}

.taskChipIcon {
  width: 14px;
  height: 14px;
  color: var(--chip-icon);
  stroke: var(--chip-icon);
}

.taskChipLabel {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 35vw;
}

.taskChipClose {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  padding: 0 2px;
  color: var(--muted);
}
.taskChipClose:hover {
  color: var(--text);
}

.input {
  flex: 1 1 auto;
  min-width: 0;
  border: none;
  outline: none;
  font-size: 14px;
  color: var(--text);
  background: transparent;
  padding: 0;
}
.input::placeholder {
  color: var(--muted-2);
}

/* ✅ TSX에서 조건부로 붙이므로 "존재"는 필요 */
.inputHasChip {
  /* 필요 시 padding 조정 등을 여기서 */
}

.attachBtn,
.sendBtn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--btn-bg);
  cursor: pointer;
}
.attachBtn:hover,
.sendBtn:hover {
  background: var(--btn-hover);
}

.iconMd {
  width: 20px;
  height: 20px;
  color: var(--text);
}
.iconMdAccent {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

/* =========================================================
   9) Attachments
   ========================================================= */
.attachList {
  padding: 0 16px 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  background: var(--surface);
}

.attachChip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--surface-2);
  font-size: 12px;
  color: var(--text);
  border: 1px solid var(--border);
}

.attachIcon {
  width: 14px;
  height: 14px;
  color: var(--muted);
}

.attachName {
  max-width: 160px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.attachRemove {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  color: var(--muted);
}
.attachRemove:hover {
  color: var(--text);
}

/* =========================================================
   10) Toast
   ========================================================= */
.toast {
  position: fixed;
  left: 50%;
  bottom: 76px;
  transform: translateX(-50%);
  background: rgba(15, 23, 42, 0.96);
  color: #ffffff;
  font-size: 13px;
  padding: 8px 12px;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
  z-index: 9999;
}

/* =========================================================
   11) Task modal
   ========================================================= */
.typeModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.42);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.taskModal {
  position: relative;
  width: min(420px, calc(100% - 32px));
  border-radius: 16px;
  background: var(--surface);
  padding: 16px 18px 18px;
  box-shadow: var(--shadow-2);
  border: 1px solid var(--border);
}

/* ✅ TSX에서 쓰는 헤더 래퍼 */
.typeHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.typeTitle {
  margin: 0;
  padding-right: 32px;
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
}

.typeCloseBtn {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 1;
  cursor: pointer;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--border);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--surface);
}
.typeCloseBtn:hover {
  background: var(--surface-2);
}
.typeCloseIcon {
  display: inline-block;
  color: var(--text);
}

.taskGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.taskCard {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-2);
  padding: 10px 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text);
}
.taskCard:hover {
  background: var(--accent-soft);
  border-color: rgba(37, 99, 235, 0.3);
}

.taskCardIcon {
  width: 18px;
  height: 18px;
  color: var(--accent);
  stroke: var(--accent);
}
.taskLabel {
  font-size: 12px;
  color: var(--text);
}

/* =========================================================
   12) Quick Actions (Landing) - 카드형(1번 이미지 톤)
   ========================================================= */
.quickWrap {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  padding: 28px 16px 24px;
  gap: 18px;
  margin: 0 auto;
  box-sizing: border-box;
}

.quickTitle {
  font-size: 22px;
  font-weight: 850;
  letter-spacing: -0.02em;
  text-align: center;
  color: var(--text);
}

.quickSection {
  width: 100%;
  max-width: 980px;
}

.quickSectionHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 10px 0 10px;
  padding: 0 2px;
}

.quickSectionIcon {
  width: 16px;
  height: 16px;
  color: var(--muted);
}

.quickSectionTitle {
  font-size: 14px;
  font-weight: 800;
  color: var(--accent);
}

/* ✅ 카드 그리드: 넓으면 3열, 줄면 2열/1열로 자연스럽게 */
.quickGrid {
  width: 100%;
  display: grid;
  gap: 14px;

  /* auto-fit + minmax로 “카드형” 유지하면서 반응형 */
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

/* ✅ 퀵 카드 = MakeSafetyDocs.panel 톤 */
.quickCard {
  width: 100%;
  box-sizing: border-box;

  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 18px;
  padding: 16px 16px;

  cursor: pointer;
  text-align: left;
  color: var(--text);

  box-shadow: var(--shadow-1);
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.15s ease,
    box-shadow 0.15s ease;

  display: grid;
  grid-template-columns: 54px minmax(0, 1fr) auto;
  column-gap: 14px;
  align-items: center;
}

.quickCard:hover {
  background: var(--surface-2);
  border-color: var(--border-2);
  transform: translateY(-1px);
}

.quickCard:active {
  transform: translateY(0);
}

.quickCard:focus-visible {
  outline: 2px solid rgba(37, 99, 235, 0.9);
  outline-offset: 2px;
}

/* 좌측 아이콘 원 */
.quickIconWrap {
  width: 54px;
  height: 54px;
  border-radius: 999px;

  border: 1px solid var(--border);
  background: var(--surface-2);

  display: grid;
  place-items: center;
}

.quickIcon {
  width: 22px;
  height: 22px;
  color: var(--accent);
}

/* 가운데 텍스트 */
.quickText {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.quickLabel {
  font-size: 15px;
  font-weight: 900;
  letter-spacing: -0.2px;
  color: var(--text);

  /* 길어도 안전 */
  overflow-wrap: anywhere;
  word-break: keep-all;

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 우측 CTA pill */
.quickCta {
  justify-self: end;

  font-size: 12px;
  font-weight: 850;
  padding: 9px 12px;
  border-radius: 999px;

  border: 1px solid var(--border);
  background: var(--btn-bg);
  color: var(--text);
  white-space: nowrap;
}

/* =========================================================
   18) 모바일 레이아웃 (Quick Actions만 필요한 부분 조정)
   ========================================================= */
@media (max-width: 768px) {
  .quickWrap {
    justify-content: flex-start;
    padding-top: 34px;
    gap: 16px;
  }

  /* 모바일에서는 카드 폭 때문에 1~2열 자동으로 내려감(280px 기준) */
  .quickGrid {
    gap: 12px;
  }

  .quickCard {
    padding: 14px 14px;
    grid-template-columns: 50px minmax(0, 1fr) auto;
    column-gap: 12px;
  }
  
  .quickCta {
    display: none;
  }

  .quickIconWrap {
    width: 50px;
    height: 50px;
  }

  .quickLabel {
    font-size: 12px;
  }
}

@media (max-width: 420px) {
  .quickGrid {
    display: block;
  }
  /* ✅ 아주 작은 폰: 카드 1줄(아이콘+라벨)로 */
  .quickCard {
    margin-bottom: 2vh;

    /* 높이도 한 줄 느낌으로 */
    min-height: 52px;
    padding: 10px 12px;
  }

  /* ✅ CTA는 숨김 유지 */
  .quickCta {
    display: none;
  }

  /* ✅ 라벨을 1줄 ... 처리 */
  .quickLabel {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    /* 기존 -webkit-line-clamp 쓰고 있으면 무력화 */
    display: block;
  }

  .quickTitle {
    font-size: 18px;
  }
}



/* =========================================================
   13) Hint chips
   ========================================================= */
.hintWrap {
  margin: 0;
  padding: 4px 0 8px;
  max-width: 780px;
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  gap: 8px;
}

.hintChip {
  border-radius: 999px;
  border: 1px solid var(--border);
  padding: 6px 12px;
  font-size: 12px;
  line-height: 1.4;
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease,
    box-shadow 0.15s ease, color 0.15s ease;
}

body[data-theme='dark'] .hintChip {
  background: var(--surface-2);
  color: var(--text);
  border-color: var(--border);
}

.hintChip:hover {
  background: var(--accent);
  border-color: var(--accent);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.15);
  transform: translateY(-1px);
}

/* =========================================================
   14) Doc wrapper (Risk wizard 등)
   ========================================================= */
.docWrap {
  width: 100%;
  margin: 0 auto;
  padding: 16px 12px 24px;
}

/* =========================================================
   15) AI bubble: safety-doc download (CSS Modules 호환)
   - HTML string은 class="safety-doc-download-..." 그대로 들어오므로
     클래스 선택자(.) 대신 [class~="..."] / [data-ai-kind="..."]로 매칭
   ========================================================= */
.aiBubble [data-ai-kind="safety-doc-download"] {
  margin-top: 12px;
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--surface);
}

.aiBubble [class~="safety-doc-download-title"] {
  font-size: 13px;
  font-weight: 800;
  margin-bottom: 10px;
  color: var(--text);
  opacity: 0.9;
}

.aiBubble [class~="safety-doc-download-grid"] {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.aiBubble a[class~="safety-doc-download-card"] {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-2);
  text-decoration: none;
  color: var(--text);
}
.aiBubble a[class~="safety-doc-download-card"]:hover {
  border-color: var(--border-2);
  background: var(--accent-soft);
}

.aiBubble [class~="safety-doc-download-left"] {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.aiBubble [class~="safety-doc-download-icon"] {
  font-size: 18px;
  line-height: 1;
  flex-shrink: 0;
}
.aiBubble [class~="safety-doc-download-meta"] {
  min-width: 0;
}
.aiBubble [class~="safety-doc-download-name"] {
  font-size: 13px;
  font-weight: 750;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.aiBubble [class~="safety-doc-download-sub"] {
  margin-top: 2px;
  font-size: 12px;
  opacity: 0.75;
  color: var(--muted);
}

.aiBubble [class~="safety-doc-download-right"] {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}
.aiBubble [class~="safety-doc-download-badge"] {
  font-size: 11px;
  font-weight: 900;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.03);
  opacity: 0.9;
  color: var(--text);
}
body[data-theme='dark'] .aiBubble [class~="safety-doc-download-badge"] {
  background: rgba(255, 255, 255, 0.06);
}
.aiBubble [class~="safety-doc-download-arrow"] {
  opacity: 0.7;
  color: var(--muted);
}

/* =========================================================
   16) Safety Edu: search / pane / meta (보이는 부분까지만 정리)
   ========================================================= */
.eduCount {
  opacity: 0.75;
  font-weight: 600;
  color: var(--muted);
}

.eduSearchBar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--surface-2);
  margin: 12px 0 16px;
  color: var(--text);
}

.eduSearchIcon {
  opacity: 0.7;
  color: var(--muted);
}

.eduSearchInput {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  color: var(--text);
  font-size: 14px;
}
.eduSearchInput::placeholder {
  color: var(--muted-2);
}

.eduSearchClear {
  border: none;
  background: transparent;
  cursor: pointer;
  opacity: 0.7;
  padding: 4px;
  color: var(--muted);
}
.eduSearchClear:hover {
  opacity: 1;
  color: var(--text);
}

.eduSearchResults {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.eduChipMeta {
  margin-left: 10px;
  font-size: 12px;
  opacity: 0.65;
  color: var(--muted);
}

.eduCatCount {
  font-size: 12px;
  opacity: 0.75;
  margin-left: 6px;
  color: var(--muted);
}

.eduMoreBtn {
  margin-top: 10px;
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px dashed var(--border);
  background: var(--surface);
  cursor: pointer;
  opacity: 0.9;
  color: var(--text);
}
.eduMoreBtn:hover {
  opacity: 1;
  background: var(--surface-2);
}

.eduLoading {
  padding: 14px 12px;
  opacity: 0.8;
  color: var(--muted);
}

.eduError {
  padding: 14px 12px;
  border: 1px solid rgba(255, 120, 120, 0.25);
  background: rgba(255, 120, 120, 0.06);
  border-radius: 12px;
  color: var(--text);
}

.eduErrorMsg {
  margin-top: 6px;
  opacity: 0.85;
  font-size: 13px;
}

.eduPane {
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 14px;
  padding: 12px;
  color: var(--text);
}

.eduPaneHead {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 10px;
}

.eduPaneTitle {
  font-size: 14px;
  font-weight: 800;
}

.eduMetaRow {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

/* =========================================================
   17) Responsive
   ========================================================= */
@media (max-width: 1024px) {
  .menuBtn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
}
@media (max-width: 768px) {
  .menuBtn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .quickGrid {
    width: 100%;
    margin: 0;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    column-gap: 12px;
    row-gap: 12px;
  }

  .quickSectionHeader {
    width: 100%;
    margin: 0 0 8px;
  }
  .aiBubble [class~="safety-doc-download-grid"] {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 420px) {
  .taskGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
